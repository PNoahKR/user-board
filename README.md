# ê²Œì‹œíŒ í”„ë¡œì íŠ¸

## í”„ë¡œì íŠ¸ ê°œìš”

- ê°„ë‹¨í•œ íšŒì›ê°€ì… ë° ë¡œê·¸ì¸ ê¸°ëŠ¥ê³¼ ê²Œì‹œíŒ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì›¹ì–´í”Œë¦¬ì¼€ì´ì…˜ ê°œì¸ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.
- í”„ë¡œì íŠ¸ ê¸°ê°„ : 2024.04.08~ 2024.05.17

## ğŸ“š ê¸°ìˆ  ìŠ¤íƒ

- ì–¸ì–´ : JAVA
- í”„ë ˆì„ì›Œí¬ : Spring boot, Spring data JPA, Spring Security, Spring Web, Spring Validation, Lombok
- ë°ì´í„°ë² ì´ìŠ¤ : Mysql

## ğŸ“– ì£¼ìš”ê¸°ëŠ¥

<details>
<summary><strong>User</strong></summary>

### User

- íšŒì›ê°€ì… : ì´ë¦„, ë‹‰ë„¤ì„, ë‚˜ì´, ì„±ë³„, ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ ê°€ì…
- ë¡œê·¸ì¸ : ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ í†µí•´ ë¡œê·¸ì¸
- ë¡œê·¸ì•„ì›ƒ : ë¡œê·¸ì¸ë˜ ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ
- ë‚´ ì •ë³´ ìˆ˜ì • : ë‹‰ë„¤ì„, ë¹„ë°€ë²ˆí˜¸ ìˆ˜ì •

</details>

<p></p>

<details>
<summary><strong>Board</strong></summary>

### Board

- ê²Œì‹œê¸€ ì‘ì„± : ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ ê²Œì‹œê¸€ ì‘ì„±
- ê²Œì‹œê¸€ ì¡°íšŒ : ëª©ë¡ ì¡°íšŒ, ìƒì„¸ ì¡°íšŒ
- ê²Œì‹œê¸€ ìˆ˜ì • ë° ì‚­ì œ : ë³¸ì¸ ê²Œì‹œê¸€ ìˆ˜ì • ë° ì‚­ì œ

</details>

## ğŸ“ ìš”êµ¬ì‚¬í•­

<details>
<summary><strong>User</strong></summary>

### User

#### íšŒì›ê°€ì…

- ì´ë¦„, ë‹‰ë„¤ì„, ë‚˜ì´, ì„±ë³„, ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸ëŠ” í•„ìˆ˜ ê°’ìœ¼ë¡œ í•œë‹¤.
- ì´ë©”ì¼ì€ ì¤‘ë³µìœ¼ë¡œ ë“±ë¡ë  ìˆ˜ ì—†ë‹¤.
- ë¹„ë°€ë²ˆí˜¸ëŠ” ë‹¨ë°©í–¥ ì•”í˜¸í™”ë¡œ ì €ì¥í•œë‹¤.
- ë¹„ë°€ë²ˆí˜¸ëŠ” 4ì ì´ìƒ ì…ë ¥í•´ì•¼í•œë‹¤.

#### ë¡œê·¸ì¸

- ì´ë©”ì¼ì˜ ì¡´ì¬ì—¬ë¶€ë¥¼ ì²´í¬í•œë‹¤.
- ë¹„ë°€ë²ˆí˜¸ë¥¼ ì²´í¬í•œë‹¤.
- ë¡œê·¸ì¸ì€ Sessionì„ ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ì¸ ìƒíƒœë¥¼ í™•ì¸í•œë‹¤.

#### ë¡œê·¸ì•„ì›ƒ

- ë¡œê·¸ì¸ë¼ ìˆëŠ” ì •ë³´ë¥¼ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬í•œë‹¤.

#### ë‚´ ì •ë³´ ìˆ˜ì •

- ë‹‰ë„¤ì„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.
- ë¹„ë°€ë²ˆí˜¸ëŠ” íšŒì›ê°€ì…ë•Œ ì²´í¬í•˜ëŠ” ë¡œì§ê³¼ ë™ì¼í•˜ë‹¤.
- ìˆ˜ì • ì™„ë£Œ ì‹œ ìˆ˜ì •ëœ ë‚´ìš©ì´ ì¦‰ì‹œ ë°˜ì˜ëœë‹¤.

</details>

<p></p>

<details>
<summary><strong>Board</strong></summary>

### Board

#### ê²Œì‹œê¸€ ì‘ì„±

- ë¡œê·¸ì¸ í•œ ì‚¬ìš©ìë§Œ ê²Œì‹œê¸€ì„ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.
- ê²Œì‹œê¸€ ì‘ì„± ì‹œ ì œëª©ê³¼ ë³¸ë¬¸ì„ ì…ë ¥í•  ìˆ˜ ìˆë‹¤.
- ì œëª©ê³¼ ë³¸ë¬¸ì€ ë¹ˆê°’ì´ë©´ ì•ˆëœë‹¤.

#### ê²Œì‹œê¸€ ì¡°íšŒ

- ê²Œì‹œê¸€ ëª©ë¡ì„ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
- ê²Œì‹œê¸€ ëª©ë¡ì€ í˜ì´ì§• ì²˜ë¦¬í•œë‹¤.
- ê²Œì‹œê¸€ ëª©ë¡ì€ í•œ í˜ì´ì§€ë‹¹ 10ê°œì”© ë…¸ì¶œí•œë‹¤.
- ê²Œì‹œê¸€ ìƒì„¸ ë‚´ìš©ì„ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
- ê²Œì‹œê¸€ ìƒì„¸ë‚´ìš©ì€ ì‘ì„±ìì˜ ë‹‰ë„¤ì„, ì‘ì„±ì‹œê°„, ìˆ˜ì •ì‹œê°„, ì œëª©, ë³¸ë¬¸ì´ ë…¸ì¶œëœë‹¤.

#### ê²Œì‹œê¸€ ìˆ˜ì • ë° ì‚­ì œ

- ê²Œì‹œê¸€ ìˆ˜ì • ë° ì‚­ì œëŠ” ì‘ì„±ì ë³¸ì¸ë§Œ í•  ìˆ˜ ìˆë‹¤.
- ê²Œì‹œê¸€ ìˆ˜ì •ì€ ì œëª©ê³¼ ë³¸ë¬¸ì„ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.
- ê²Œì‹œê¸€ ìˆ˜ì • ì‹œ ì œëª©ê³¼ ë³¸ë¬¸ì€ ë¹ˆê°’ì´ë©´ ì•ˆëœë‹¤.
- ê²Œì‹œê¸€ ì‚­ì œëŠ” ë³¸ì¸ë§Œ í•  ìˆ˜ ìˆë‹¤.
- ê²Œì‹œê¸€ ì‚­ì œëŠ” Soft Deleteë¡œ ì²˜ë¦¬í•œë‹¤.

</details>

## ğŸ’» êµ¬í˜„

1. ERD ì„¤ê³„

<details>
<summary><strong>ERD</strong></summary>
<img width="445" alt="UserBoard_ERD" src="https://github.com/PNoahKR/user-board/assets/156992925/721aa737-4769-4370-a89d-5e7924d59b58">

```bash
CREATE TABLE `board` (
  `id` int NOT NULL AUTO_INCREMENT,
  `title` varchar(50) NOT NULL,
  `content` text NOT NULL,
  `user_id` int DEFAULT NULL,
  `created_at` datetime DEFAULT (now()),
  `modified_at` datetime DEFAULT (now()),
  `status` tinyint(1) DEFAULT '1',
  PRIMARY KEY (`id`),
  KEY `user_id` (`user_id`),
  CONSTRAINT `board_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `user` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(30) NOT NULL,
  `nickname` varchar(5) NOT NULL,
  `email` varchar(30) NOT NULL,
  `password` varchar(60) NOT NULL COMMENT 'Bcrypt',
  `gender` varchar(6) DEFAULT NULL COMMENT 'female or male',
  `age` int DEFAULT NULL,
  `created_at` datetime DEFAULT (now()),
  `modified_at` datetime DEFAULT (now()),
  PRIMARY KEY (`id`),
  UNIQUE KEY `nickname` (`nickname`),
  UNIQUE KEY `email` (`email`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
```

</details>

2. API ì„¤ê³„

<details>
<summary><strong>ì‚¬ìš©ì API</strong></summary>

### ì‚¬ìš©ì API

#### íšŒì›ê°€ì…

- **Endpoint**: `POST /user`
- **Request Body**:
    ```json
    {
      "name" : "í…ŒìŠ¤íŠ¸", 
      "nickname" : "test", 
      "email" : "test@test.kr", 
      "password" : "password", 
      "gender" : "M", 
      "age" : 20
  }
    ```
- **Response**:
    ```json
    {
      "status": 200,
      "message": "success",
      "data": {
        "message": "ì„±ê³µ",
        "id": 1,
        "statusCode": 200
      }
    }
    ```

#### ë¡œê·¸ì¸

- **Endpoint**: `POST /login`
- **Request Body**:
    ```json
    {
      "email": "test@test.kr",
      "password": "password"
    }
    ```
- **Response**:
    ```json
    {
      "status": 200,
      "message": "success",
      "data": 1
    }
    ```
- **Authentication**: ì„¸ì…˜ì´ ìƒì„±ë˜ê³  ì‚¬ìš©ì IDê°€ ì„¸ì…˜ì— ì €ì¥ë¨

#### ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ

- **Endpoint**: `GET /user/info`
- **Response**:
    ```json
    {
      "status": 200,
      "message": "success",
      "data": {
        "name" : "í…ŒìŠ¤íŠ¸", 
        "email" : "test@test.kr",      
        "nickname" : "test", 
        "gender" : "M", 
        "age" : 20
      }
    }
    ```
- **Authentication**: ì„¸ì…˜ì„ í†µí•´ ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥

#### ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •

- **Endpoint**: `PUT /user/info`
- **Request Body**:
    ```json
    {
      "nickname": "test2",
      "password": "00000"
    }
    ```
- **Response**:
    ```json
    {
      "status": 200,
      "message": "success",
      "data": 1
    }
    ```
- **Authentication**: ì„¸ì…˜ì„ í†µí•´ ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥

#### ë¡œê·¸ì•„ì›ƒ

- **Endpoint**: `POST /logout`
- **Response**:
    ```json
    {
      "status": 200,
      "message": "success",
      "data": null
    }
    ```
- **Authentication**: ì„¸ì…˜ì´ ë§Œë£Œë˜ê³  ì‚¬ìš©ìëŠ” ë¡œê·¸ì•„ì›ƒë¨

</details>

<p></p>

<details>
<summary><strong>ê²Œì‹œíŒ API</strong></summary>

### ê²Œì‹œíŒ API

#### ëª¨ë“  ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ

- **Endpoint**: `GET /boards`
- **Parameters**:
    - `page` (optional): í˜ì´ì§€ ë²ˆí˜¸, ê¸°ë³¸ê°’ì€ 1
    - `size` (optional): í˜ì´ì§€ í¬ê¸°, ê¸°ë³¸ê°’ì€ 10
- **Response**:
    ```json
    {
      "status": 200,
      "message": "success",
      "data": {
        "content": [
            {
                "boardId": 2,
                "title": "í…ŒìŠ¤íŠ¸ì œëª©2",
                "writer": "ì‘ì„±ì2"
            },
            {
                "boardId": 1,
                "title": "í…ŒìŠ¤íŠ¸ì œëª©1",
                "writer": "ì‘ì„±ì1"
            }
          ],
          "paging": {
               "pageNumber": 1,
               "pageSize": 10,
               "hasNext": false,
               "numberOfElements": 2
          }
      }
    }
    ```

#### ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ

- **Endpoint**: `GET /board/{boardId}`
- **Parameters**:
    - `boardId`: ê²Œì‹œê¸€ ID
- **Response**:
    ```json
    {
      "status": 200,
      "message": "success",
      "data": {
        "title": "í…ŒìŠ¤íŠ¸ì œëª©1",
        "createdAt": "2024-05-21T00:00:00",
        "modifiedAt": "2024-05-21T00:00:00",
        "userNickname": "ì‘ì„±ì1",
        "content": "í…ŒìŠ¤íŠ¸ê²Œì‹œë¬¼ì…ë‹ˆë‹¤."
      }
    }
    ```

#### ê²Œì‹œê¸€ ì‘ì„±

- **Endpoint**: `POST /board`
- **Request Body**:
    ```json
    {
      "title": "í…ŒìŠ¤íŠ¸ì œëª©3",
      "content": "ì´ê²ƒë„ í…ŒìŠ¤íŠ¸ ê²Œì‹œë¬¼ì…ë‹ˆë‹¤."
    }
    ```
- **Response**:
    ```json
    {
      "status": 200,
      "message": "success",
      "data": 3
    }
    ```
- **Authentication**: ì„¸ì…˜ì„ í†µí•´ ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥

#### ê²Œì‹œê¸€ ìˆ˜ì •

- **Endpoint**: `PUT /board/{boardId}`
- **Request Body**:
    ```json
    {
      "title": "updated í…ŒìŠ¤íŠ¸ì œëª©3",
      "content": "Updated content"
    }
    ```
- **Response**:
    ```json
    {
      "status": 200,
      "message": "success",
      "data": 3
    }
    ```
- **Authentication**: ì„¸ì…˜ì„ í†µí•´ ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥

#### ê²Œì‹œê¸€ ì‚­ì œ

- **Endpoint**: `DELETE /board/{boardId}`
- **Response**:
    ```json
    {
      "status": 200,
      "message": "success",
      "data": 3
    }
    ```
- **Authentication**: ì„¸ì…˜ì„ í†µí•´ ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥

</details>

## ğŸ§‘â€ğŸ’» í”„ë¡œì íŠ¸ ì§„í–‰ ì¤‘ ê³ ë ¤í•œ ì‚¬í•­ë“¤

### 1. íŒ¨í‚¤ì§€ êµ¬ì¡°
<details>
<summary>íŒ¨í‚¤ì§€ êµ¬ì¡°</summary>
ê°ì²´ì§€í–¥ì ì¸ íŒ¨í‚¤ì§€ êµ¬ì¡°ë¡œ ê³„ì¸µí˜• íŒ¨í‚¤ì§€ í˜•íƒœë¡œ ì„¤ê³„í•´ êµ¬ì¡°ë¥¼ ê°„ë‹¨í•˜ê²Œ íŒŒì•…í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

---

- **controller** : ì›¹ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬
- **dto** : ë°ì´í„° ì „ì†¡ ê°ì²´
    - **request** : í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ë°ì´í„°ë¥¼ ë‹´ëŠ” ê°ì²´
    - **response** : ì„œë²„ ì‘ë‹µ ë°ì´í„°ë¥¼ ë‹´ëŠ” ê°ì²´
- **domain** : JPA ì—”í‹°í‹° í´ë˜ìŠ¤
- **global** : í”„ë¡œì íŠ¸ ì „ì—­ì— ì‚¬ìš©ë˜ëŠ” êµ¬ì„± ìš”ì†Œ
    - **annotation** : ì»¤ìŠ¤í…€ ì–´ë…¸í…Œì´ì…˜
    - **common** : ê³µí†µ ì‘ë‹µì²˜ë¦¬ ë° ìœ í‹°ë¦¬í‹°
    - **core** : config, ì˜ˆì™¸ ì²˜ë¦¬ ë“± í•µì‹¬ ìš”ì†Œ
- **repository** : ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ì„ ë‹´ë‹¹í•˜ëŠ” ë¦¬í¬ì§€í† ë¦¬
- **service** : ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹í•˜ëŠ” ì„œë¹„ìŠ¤ í´ë˜ìŠ¤
</details>

### 2. ê³µí†µ ì‘ë‹µ ë° ì˜ˆì™¸ ì²˜ë¦¬

<details>
<summary>ê³µí†µ ì‘ë‹µ</summary>

#### ê³µí†µ ì‘ë‹µ

ëª¨ë“  APIì˜ ì‘ë‹µì€ 'CommonResponse' ê°ì²´ë¥¼ í†µí•´ ë°˜í™˜í•˜ë„ë¡ ì„¤ê³„í–ˆìœ¼ë©°, ì„±ê³µê³¼ ì‹¤íŒ¨ì— ë”°ë¼ API ì‘ë‹µì´ ì¼ê´€ë  ìˆ˜ ìˆë„ë¡ 'ApiResponseUtil'ì„ í†µí•´ ë©”ì„œë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

**CommonResponse**

```java

@Getter
public class CommonResponse<T> {

    private final Integer status;
    private final String message;
    private final T data;

    public CommonResponse(Integer status, String message, T data) {
        this.status = status;
        this.message = message;
        this.data = data;
    }

    public CommonResponse(Integer status, String message) {
        this.status = status;
        this.message = message;
        this.data = null;
    }
}
```

- status: HTTP ìƒíƒœ ì½”ë“œ
- message: ì‘ë‹µ ë©”ì„¸ì§€ (ì„±ê³µì‹œ 'success' ë°˜í™˜, ì‹¤íŒ¨ì‹œ ì˜¤ë¥˜ ë©”ì„¸ì§€ ë°˜í™˜)
- data: ì‘ë‹µ ë°ì´í„° (ì—†ì„ì‹œ null)

---

**ApiResponseUtil**

```java
public class ApiResponseUtil {

    public static <T> CommonResponse<T> success() {
        return new CommonResponse<>(SUCCESS.getStatus().value(), SUCCESS.getMessage(), null);
    }

    public static <T> CommonResponse<T> success(T response) {
        return new CommonResponse<>(SUCCESS.getStatus().value(), SUCCESS.getMessage(), response);
    }

    public static <T> CommonResponse<T> failure(CustomErrorCode errorCode) {
        return new CommonResponse<>(errorCode.getStatus().value(), errorCode.getMessage());
    }

    public static <T> CommonResponse<T> failure(Integer statusCode, String message) {
        return new CommonResponse<>(statusCode, message);
    }
}
```

</details>
<p></p>
<details>
<summary>ì˜ˆì™¸ ì²˜ë¦¬</summary>

#### ì˜ˆì™¸ ì²˜ë¦¬

í•´ë‹¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°œìƒí•œëŠ” ì˜ˆì™¸ëŠ” 'GlobalExceptionHandler' í´ë˜ìŠ¤ë¥¼ í†µí•´ ì‘ë‹µì„ ë°˜í™˜í•˜ê³ , ë¡œê·¸ë¥¼ ë‚¨ê¸°ë©° íŠ¹ì • ì˜ˆì™¸ë¥¼ ì»¤ìŠ¤í…€ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

**GlobalExceptionHandler**

```java

@Slf4j
@RestControllerAdvice
public class GlobalExceptionHandler extends ResponseEntityExceptionHandler {
    // ì¶”ê°€í•´ì•¼ í•˜ëŠ” Exception ì¶”ê°€ ì •ì˜

    @ExceptionHandler(Exception.class)
    protected ResponseEntity<CommonResponse<Object>> handleException(Exception exception) {
        log.error("Exception", exception);

        return toErrorResponseEntity(SERVER_ERROR);
    }

    @ExceptionHandler(CustomException.class)
    protected ResponseEntity<CommonResponse<Object>> handleBadRequestException(CustomException exception) {
        log.warn("CustomException", exception);

        return toErrorResponseEntity(exception.getErrorCode());
    }

    protected ResponseEntity<CommonResponse<Object>> toErrorResponseEntity(CustomErrorCode errorCode) {

        return ResponseEntity
                .status(errorCode.getStatus().value())
                .body(ApiResponseUtil.failure(errorCode));
    }

    @Override
    protected ResponseEntity<Object> handleExceptionInternal(Exception exception, Object body, HttpHeaders headers, HttpStatusCode statusCode, WebRequest request) {
        log.error("Exception", exception);
        CommonResponse<Object> response = ApiResponseUtil.failure(statusCode.value(), exception.getMessage());
        return ResponseEntity.status(statusCode).body(response);
    }
}
```

---
'CustomException'ì€ 'RuntimeException'ì„ ìƒì†ë°›ì•„ ì»¤ìŠ¤í…€ ì˜ˆì™¸ë¥¼ ì •ì˜í•˜ê³ , 'CustomErrorCode'ë¥¼ í¬í•¨í•´ ì˜ˆì™¸ ë°œìƒì‹œ íŠ¹ì • ì½”ë“œì— ëŒ€í•œ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

**CustomException**

```java

@Getter
public class CustomException extends RuntimeException {
    private final CustomErrorCode errorCode;

    public CustomException(CustomErrorCode errorCode) {
        this.errorCode = errorCode;
    }
}
```

---
'CustomErrorCode'ë¥¼ í†µí•´ íŠ¹ì • ì—ëŸ¬ì½”ë“œë¥¼ ì •ì˜í•˜ê³ , ì‘ë‹µ ì½”ë“œëŠ” HTTP ìƒíƒœ ì½”ë“œì™€ ë©”ì„¸ì§€ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

**CustomErrorCode**

```java

@Getter
public enum CustomErrorCode {
    // ê³µí†µ ì‘ë‹µ ì½”ë“œ
    SUCCESS(OK, "success"),
    SERVER_ERROR(INTERNAL_SERVER_ERROR, "server error"),
    // ì‚¬ìš©ì ì •ì˜ ì½”ë“œ
    LOGIN_FAIL(HttpStatus.BAD_REQUEST, "ë¡œê·¸ì¸ ì‹¤íŒ¨"),
    NOT_FOUND_LOGIN_INFO(HttpStatus.NOT_FOUND, "ê³„ì • ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."),
    NOT_FOUND_BOARD_INFO(HttpStatus.NOT_FOUND, "ê²Œì‹œë¬¼ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."),
    UNAUTHORIZED(HttpStatus.UNAUTHORIZED, "ì¸ì¦ ì‹¤íŒ¨"),
    DUPLICATE_VALUE(HttpStatus.CONFLICT, "ì¤‘ë³µ ì˜¤ë¥˜"),
    INVALID_FORMAT(HttpStatus.BAD_REQUEST, "ìœ íš¨í•˜ì§€ ì•Šì€ ì…ë ¥ì…ë‹ˆë‹¤.");

    private final HttpStatus status;
    private final String message;

    CustomErrorCode(HttpStatus status, String message) {
        this.status = status;
        this.message = message;
    }
}
```

</details>

### 3. ë¡œê·¸ì¸ ì¸ì¦ ë°©ì‹

<details>
<summary>ì„¸ì…˜ ì¸ì¦ ë°©ì‹</summary>
ë¡œê·¸ì¸ ì¸ì¦ë°©ì‹ì€ ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œ ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ ë°©ì‹ì„ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆë‹¤.

ì„¸ì…˜ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ì„œ ì„¸ì…˜ ë¡œê·¸ì¸ ì²´í¬ ë¡œì§ì— ëŒ€í•œ ë¶€ë¶„ì´ ì¤‘ë³µì ìœ¼ë¡œ ë“¤ì–´ê°€ê²Œ ëê³  ì´ë¥¼ ê³µí†µí™”í•˜ëŠ” ë°©ì•ˆìœ¼ë¡œ ArgumentResolverë¥¼ ì‚¬ìš©í•´ êµ¬í˜„í•˜ê²Œëë‹¤.

**SessionAuth**

```java

@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.PARAMETER)
public @interface SessionAuth {
}
```

ë¡œê·¸ì¸ ì²´í¬ë¥¼ ìœ„í•œ ì»¤ìŠ¤í…€ ì–´ë…¸í…Œì´ì…˜

---
**SessionLoginInfo**

```java

@Getter
@AllArgsConstructor
public class SessionLoginInfo {

    private Long id;
    private String nickname;
    private String email;

    public static SessionLoginInfo from(User user) {
        return new SessionLoginInfo(
                user.getId(),
                user.getNickname(),
                user.getEmail()
        );
    }
}
```

ë¡œê·¸ì¸ ì •ë³´ê°€ í•„ìš”í•œ APIì— ì „ë‹¬í•˜ê¸° ìœ„í•œ ë¡œê·¸ì¸ ì •ë³´ DTO ê°ì²´

---
**SessionLoginArgumentResolver**

```java

@Slf4j
@Component
@RequiredArgsConstructor
public class SessionLoginArgumentResolver implements HandlerMethodArgumentResolver {

    private final HttpSession httpSession;
    private final UserRepository userRepository;

    @Override
    public boolean supportsParameter(MethodParameter parameter) {
        boolean hasAnnotation = parameter.hasParameterAnnotation(SessionAuth.class);
        boolean isLongInfo = SessionLoginInfo.class.isAssignableFrom(parameter.getParameterType());

        return hasAnnotation && isLongInfo;

    }

    @Override
    public Object resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer, NativeWebRequest webRequest, WebDataBinderFactory binderFactory) throws Exception {
        if (ObjectUtils.isEmpty(httpSession.getAttribute(LOGIN_USER))) {
            throw new CustomException(CustomErrorCode.UNAUTHORIZED);
        }

        Long userId = (Long) httpSession.getAttribute(LOGIN_USER);

        return userRepository.findById(userId)
                .map(SessionLoginInfo::from)
                .orElseThrow(() -> new CustomException(CustomErrorCode.NOT_FOUND_LOGIN_INFO));
    }
}
```

APIì— íŒŒë¼ë¯¸í„°ê°€ SessionAuth ì–´ë…¸í…Œì´ì…˜ì„ ê°€ì§€ê³  ìˆê³ , SessionLoginInfoë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©´ í•´ë‹¹ ë¦¬ì¡¸ë²„ê°€ ë™ì‘í•©ë‹ˆë‹¤

---
**WebConfig**

```java

@Configuration
@RequiredArgsConstructor
public class WebConfig implements WebMvcConfigurer {

    private final SessionLoginArgumentResolver sessionLoginArgumentResolver;

    @Override
    public void addArgumentResolvers(List<HandlerMethodArgumentResolver> resolvers) {
        resolvers.add(sessionLoginArgumentResolver);
        WebMvcConfigurer.super.addArgumentResolvers(resolvers);
    }
}
```

Springì—ì„œ ì œê³µí•´ì£¼ê³  ìˆëŠ” HandlerMethodArgumentResolverì— SessionLoginArgumentResolverë¥¼ ì¶”ê°€í•˜ê¸° ìœ„í•œ ë¡œì§ì…ë‹ˆë‹¤.

</details>

### 4. íŒ¨ìŠ¤ì›Œë“œ ì•”í˜¸í™”

<details>
<summary>íŒ¨ìŠ¤ì›Œë“œ ì•”í˜¸í™”</summary>

**PasswordConverter**

```java

@Converter
@RequiredArgsConstructor
public class PasswordConverter implements AttributeConverter<String, String> {

    private final PasswordEncoder passwordEncoder;

    @Override
    public String convertToDatabaseColumn(String attribute) {

        return passwordEncoder.encode(attribute);
    }

    @Override
    public String convertToEntityAttribute(String dbData) {
        return dbData;
    }
}
```

AttributeConverterë¥¼ ìƒì†ë°›ì•„ ì—”í‹°í‹°ì— íŒ¨ìŠ¤ì›Œë“œ ì†ì„±ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•  ë•Œ ì•”í˜¸í™”ë¥¼ í•©ë‹ˆë‹¤.
íŒ¨ìŠ¤ì›Œë“œë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì•”í˜¸í™”ëœ í˜•íƒœë¡œ ì €ì¥ê³ , ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë¶ˆëŸ¬ì˜¬ ë• ê·¸ëŒ€ë¡œ ë¶ˆëŸ¬ì˜¤ëŠ” ë‹¨ë°˜í–¥ ì•”í˜¸í™”ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

---
**PasswordCrypto**

```java

@RequiredArgsConstructor
@Component
public class PasswordCrypto {

    private final PasswordEncoder passwordEncoder;

    public String encodePassword(String password) {
        return passwordEncoder.encode(password);
    }

    public boolean matches(String rawPassword, String encodedPassword) {
        return passwordEncoder.matches(rawPassword, encodedPassword);
    }
}
```

'encodePassword' ë©”ì„œë“œë¡œ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì•”í˜¸í™”í•˜ê³ ,
'matches' ë©”ì„œë“œë¡œ ì›ë³¸ íŒ¨ìŠ¤ì›Œë“œì™€ ì•”í˜¸í™”ëœ íŒ¨ìŠ¤ì›Œë“œì˜ ì¼ì¹˜ ì—¬ë¶€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

---
**SecurityConfig**

```java

@Configuration
@EnableWebSecurity
public class SecurityConfig {
    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
                .csrf((csrf) -> csrf.disable())
                .authorizeHttpRequests(
                        (authorizeHttpRequests) -> authorizeHttpRequests.anyRequest().permitAll()
                )
                .logout((logout) -> logout.disable());
        return http.build();
    }

    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
}
```

PasswordEncoderì˜ BCryptPasswordEncoderì„ ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í–ˆìœ¼ë©°,
HTTP ë³´ì•ˆ ì„¤ì •ì—ì„œ CSRF ë³´í˜¸ë¥¼ ë¹„í™œì„±í™”í•˜ê³ , ëª¨ë“  ìš”ì²­ì„ í—ˆìš©í•˜ë©°, ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ì„ ë¹„í™œì„±í™”í–ˆìŠµë‹ˆë‹¤.

</details>
